<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Docker for friends</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="dff.html">Docker for friends</a></li><li class="chapter-item expanded affix "><a href="installation.html">Installation</a></li><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">2.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="client.html"><strong aria-hidden="true">3.</strong> Docker client</a></li><li class="chapter-item expanded "><a href="build.html"><strong aria-hidden="true">4.</strong> Build out first image</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Docker for friends</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#docker-for-friends" id="docker-for-friends">Docker for friends</a></h1>
<p>Share knownledge of Docker and containers technology with friends.</p>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>Get Docker by following the <a href="https://docs.docker.com/get-docker/">instructions found here.</a></p>
<h1><a class="header" href="#overview" id="overview">Overview</a></h1>
<blockquote>
<p>Docker is an open platform for developing, shipping, and running applications with <em>containers</em>.</p>
</blockquote>
<h2><a class="header" href="#what-is-a-container" id="what-is-a-container">What is a container?</a></h2>
<p>Containers are an abstraction at the application layer that packages code and dependencies together.</p>
<p><img src="assets/docker-containerized-appliction-blue-border_2.png" alt="Container layers" /></p>
<p>Multiple containers can run on the same machine, called host, and share the OS kernel with other containers, each running as isolated processes in user space.</p>
<p>Fundamentally, a container is nothing but a running process, with some added encapsulation features applied to it in order to keep it isolated from the host and from other containers.</p>
<h3><a class="header" href="#difference-to-virtual-machines" id="difference-to-virtual-machines">Difference to Virtual Machines</a></h3>
<p>Virtual machines (VMs) are an abstraction of physical hardware turning one server into many servers. The hypervisor allows multiple VMs to run on a single machine.</p>
<p><img src="assets/container-vm-whatcontainer_2.png" alt="Virtual machine layers" /></p>
<p>Containers and virtual machines have similar resource isolation and allocation benefits, but function differently because containers virtualize the operating system instead of hardware. Containers are more portable and efficient because each VM includes a full copy of an operating system, the application, necessary binaries and libraries - taking up tens of GBs. </p>
<h2><a class="header" href="#what-is-an-image" id="what-is-an-image">What is an image?</a></h2>
<p>One of the most important aspects of container isolation is that each container interacts with its own private filesystem; this filesystem is provided by a Docker image.</p>
<p>An image is a read-only template with instructions for creating a Docker container and includes everything needed to run an application - the code or binary, runtimes, dependencies, and any other filesystem objects required. Often, an image is based on another image, and has additional customization. For example, you may build an image which is based on the <code>ubuntu</code> image, but installs the Apache web server and your application, as well as the configuration details needed to make your application run.</p>
<h2><a class="header" href="#take-away" id="take-away">Take away</a></h2>
<ul>
<li>Containers are running processes.</li>
<li>Host is the machine where containers runs.</li>
<li>Images provide the user space to containers.</li>
</ul>
<h1><a class="header" href="#architecture" id="architecture">Architecture</a></h1>
<blockquote>
<p>Docker uses a client-server architecture. The Docker client talks to the Docker daemon, which does the heavy lifting of building, running, and distributing your Docker containers.</p>
</blockquote>
<h2><a class="header" href="#docker-daemon" id="docker-daemon">Docker daemon</a></h2>
<p>The Docker daemon (<code>dockerd</code>) listens for Docker API requests from client and manages Docker objects such as images, containers, networks, and volumes. A daemon can also communicate with other daemons to manage Docker services.</p>
<h2><a class="header" href="#docker-client" id="docker-client">Docker client</a></h2>
<p>The Docker client (<code>docker</code>) is the primary way that many Docker users interact with Docker. When you use commands such as <code>docker run</code>, the client sends these commands to <code>dockerd</code>, which carries them out.</p>
<p>The Docker client and daemon can run on the same system, or you can connect a Docker client to a remote Docker daemon. The Docker client and daemon communicate using a REST API, over UNIX sockets or a network interface. This make Docker client able communicate with more than one daemon.</p>
<h2><a class="header" href="#docker-registries" id="docker-registries">Docker registries</a></h2>
<p>A Docker registry stores Docker images. <a href="https://hub.docker.com">Docker Hub</a> is a <strong>public</strong> registry that anyone can use, and Docker is configured to look for images on Docker Hub by default. You can even run your own <strong>private</strong> registry.</p>
<h2><a class="header" href="#diagram" id="diagram">Diagram</a></h2>
<p><img src="assets/architecture.svg" alt="Docker architecture" /></p>
<h1><a class="header" href="#docker-client-1" id="docker-client-1">Docker client</a></h1>
<p>Let's see in practice what we have learned so far by familiarizing our selfs with the Docker client interface.</p>
<p>First of all, start your Docker daemon or else <code>docker</code> commands may result in following error:</p>
<pre><code>Error response from daemon: dial unix docker.raw.sock: connect: connection refused
</code></pre>
<h1><a class="header" href="#containers" id="containers">Containers</a></h1>
<p>We learned that containers are running processes that Docker daemon (<code>dockerd</code>) manages. We can list the container with <code>docker ps</code></p>
<blockquote>
<p>Try it!</p>
</blockquote>
<p>So, no container currently running. We will require an image to use in order to get a container running.</p>
<h1><a class="header" href="#images" id="images">Images</a></h1>
<p>In order to list all local images we can issue <code>docker images</code>.</p>
<blockquote>
<p>Try it!</p>
</blockquote>
<p>No images or nothing interesting, lets go to <a href="https://hub.docker.com">Docker hub</a> to find an image. Found this <a href="https://hub.docker.com/_/hello-world">hello-world</a> image so let's use this to play around.</p>
<p>In order to make this image available to run we should instruct our Docker dameon to pull it with:</p>
<pre><code>docker pull hello-world
</code></pre>
<blockquote>
<p>Try it!</p>
</blockquote>
<p>Which results in:</p>
<pre><code>$ docker pull hello-world
Using default tag: latest
latest: Pulling from library/hello-world
0e03bdcc26d7: Pull complete
Digest: sha256:e7c70bb24b462baa86c102610182e3efcb12a04854e8c582838d92970a09f323
Status: Downloaded newer image for hello-world:latest
docker.io/library/hello-world:latest
</code></pre>
<p>Let's see what <code>docker images</code> will list now.</p>
<blockquote>
<p>Try it!</p>
</blockquote>
<pre><code>$ docker images
REPOSITORY                   TAG                               IMAGE ID            CREATED             SIZE
hello-world                  latest                            bf756fb1ae65        11 months ago       13.3kB
</code></pre>
<h1><a class="header" href="#running-my-first-container" id="running-my-first-container">Running my first container</a></h1>
<p>In order to run our first container we should <code>docker run {image}</code> with the name of the image previously pulled from registyre, like:</p>
<pre><code>docker run hello-world
</code></pre>
<blockquote>
<p>Try it!</p>
</blockquote>
<p>Now, let's see where our container with <code>docker ps</code>.</p>
<blockquote>
<p>Try it! </p>
</blockquote>
<p>Nothing to see, <strong>but why?</strong> There is nothing to see because the hello-world program done all his work and exited. We can list all exited containers with <code>--all</code> option, like:</p>
<pre><code>docker ps --all
</code></pre>
<blockquote>
<p>Try it!</p>
</blockquote>
<p>This should result in:</p>
<pre><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                     PORTS               NAMES
9410dfc4526a        hello-world         &quot;/hello&quot;            6 minutes ago       Exited (0) 6 minutes ago                       romantic_kare
</code></pre>
<p>Before closing, what would you say to run something <em>more ambitious</em> like <code>docker run -it ubuntu bash</code>.</p>
<blockquote>
<p>Try it!</p>
</blockquote>
<p>In a nutshell:</p>
<ul>
<li>Docker client instruct Docker daemon to run a container with an image called <code>ubuntu</code>.</li>
<li>Docker dameon will try to pull if he does not have the image available locally.</li>
<li>The option <code>-it</code> will make it available to have an interactive pseudo-TTY with the container.</li>
<li>The <code>bash</code> would be the application that will be executed in the container and this would allow us to look around inside.</li>
</ul>
<h1><a class="header" href="#build-out-first-image" id="build-out-first-image">Build out first image</a></h1>
<p>In this chapter, we will start building our first image and familisiarize. The completed example is accessible <a href="https://github.com/dockerforfriends/webinar-material/blob/main/chapter-4/Dockerfile">here</a></p>
<h2><a class="header" href="#dockerfile" id="dockerfile">Dockerfile</a></h2>
<p>A <code>Dockerfile</code> is a text document that contains all the commands a user could call on the command line to assemble an image. When we tell Docker to build our image by executing the <code>docker build</code> command, Docker reads these instructions and executes them one by one and creates a Docker image as a result.</p>
<blockquote>
<p>The name of the Dockerfile is not important but the default filename for many commands is simply <code>Dockerfile</code>. So, we’ll use that as our filename throughout this series.</p>
</blockquote>
<p>Here is the format of the Dockerfile:</p>
<pre><code># Comment
INSTRUCTION arguments
</code></pre>
<p>The instruction is not case-sensitive. However, convention is for them to be UPPERCASE to distinguish them from arguments more easily.</p>
<h2><a class="header" href="#base-image" id="base-image">Base image</a></h2>
<p>Create a directory and create a file named <code>Dockerfile</code> and open this file in your text editor.</p>
<p>The first thing we need to do is to add a line in our <code>Dockerfile</code> that tells Docker what base image we would like to use for our application. Therefore, instead of creating our own base image, we’ll use the official <code>ubuntu</code> image.</p>
<pre><code>FROM ubuntu
</code></pre>
<p>The above is equivalent to </p>
<pre><code>FROM ubuntu:latest
</code></pre>
<h2><a class="header" href="#extending-the-base-image-ubuntu" id="extending-the-base-image-ubuntu">Extending the base image ubuntu</a></h2>
<p>Following we will, update the ubuntu package manager in order to install the <code>ping</code> command.</p>
<p>This is done with the <code>RUN &lt;command&gt;</code> syntact in the our Dockerfile.</p>
<pre><code>RUN apt-get update
RUN apt-get install iputils-ping -y
</code></pre>
<blockquote>
<p>Pay attention to the <code>-y</code> param. Usually, installing software using package manager will prompt user for <code>Y/n</code> but there is no interaction during build of image, so commands should skip the prompt.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
